# OpenStarry と他のフレームワークとの違い

> *「エージェントの動作メカニズムは人間の認知プロセスをシミュレートするものであり、従来の Request-Response プログラムではない。」*

## 異なるカテゴリ

AI エージェントエコシステムには多くのフレームワークがあります：LangChain、AutoGen、CrewAI、Semantic Kernel など。それぞれに強みがあります。OpenStarry はそれらのどれかのより良いバージョンになろうとしているわけではありません。根本的に異なるニッチを占めています — チャットボット構築のためのツールキットではなく、**デジタルライフのためのオペレーティングシステム**です。

## 7つの主要な違い

### 1. スクリプトではなく OS プロセスとしてのエージェント

**一般的なフレームワーク**: エージェントは関数です。起動し、実行し、結果を返して消滅します。呼び出し間で状態は失われます。メモリは現在のセッションに限定されます。再起動のたびにゼロからのスタートです。

**OpenStarry**: エージェントはデーモン（`openstarryd`）によって管理される永続的なデジタル生命体です。`systemd` がプロセスを管理するように。ライフサイクルがあります：

```
縁起 (Origination) → 調度 (Scheduling) → 生起 (Arising) → 運行 (Operation) → 寂滅 (Cessation)
```

スリープ、ウェイク、監視、再起動、実行中の検査が可能です。メモリはセッション間で持続します。状態は再起動後も生き残ります。エージェントには PID、リソース制限、心拍があります。

### 2. 哲学駆動型アーキテクチャ（五蘊）

**一般的なフレームワーク**: 技術的なカテゴリで整理されたプラグインシステム — ツール、チェーン、メモリ、リトリーバー、エージェント。実用的ですが、カテゴリは恣意的で重複することが多いです。

**OpenStarry**: すべてのプラグインが五つの哲学的次元のいずれかにマッピングされます：

| 蘊 | プラグインタイプ | 答える問い |
|----|-------------|----------|
| 色 Form | UI | エージェントはどう見えるか？ |
| 受 Sensation | Listener | エージェントは何を知覚できるか？ |
| 想 Perception | Provider | エージェントはどう考えるか？ |
| 行 Volition | Tool | エージェントは何ができるか？ |
| 識 Consciousness | Guide | エージェントは誰か？ |

これは装飾ではありません。**アーキテクチャの完全性**を提供します — 五蘊すべてをカバーすれば、エージェントに必要なすべてをカバーできます。うっかり次元を忘れることは不可能です。このマッピングは2,500年にわたってテストされてきました。

一つのプラグインが複数の蘊を提供できます（WebSocket プラグインは Listener と UI の両方を提供します）。インターフェースが直交しているため、システムはクリーンなまま保たれます。

### 3. 絶対的なマイクロカーネルピュリティ

**一般的なフレームワーク**: コアには通常、デフォルトのツール、組み込みのメモリ戦略、ハードコードされた LLM 統合、デフォルト UI が含まれています。それらを削除すると壊れます。

**OpenStarry**: コンパイル済み Core バイナリには**プラグインコードがゼロ**です。これはガイドラインではなく、すべてのビルドで実行される自動テストです：

```bash
pnpm test:purity  # Core にプラグインのインポートがないかスキャン → ゼロでなければならない
```

プラグインがなければ、Core は何もしません。空の実行ループ — 身体のない心拍です。この極端な純粋性は以下を意味します：
- Core の攻撃面が最小（I/O コードなし = I/O 脆弱性なし）
- 同じ Core が CLI、Web、WebSocket、IoT で変更なしに動作
- アーキテクチャが偶発的に汚染されることがない

> *「ビルトインコードがなければ、ビルトインバグもない。」*

### 4. ヘッドレス設計 — 移植可能な魂

**一般的なフレームワーク**: 通常、特定のインターフェース — チャット UI、ノートブック、API サーバーに結合されています。フロントエンドを変更するにはコアの変更が必要です。

**OpenStarry**: Core はヘッドレスです。どの UI をまとっているか、どのプロトコルをリッスンしているか、どのデバイスで実行されているかを知りません。

同じエージェントが同時に以下を行えます：
- ターミナルでレスポンス（stdio プラグイン）
- WebSocket 接続を受け付ける（transport-websocket プラグイン）
- SSE ストリーミング付き HTTP API を提供する（transport-http プラグイン）

三つの身体すべてが同じ脳、同じツール、同じ魂を共有します。任意のリスナーからのイベントが同じイベントキューに入ります。レスポンスは Transport Bridge を通じてすべての登録済み UI にルーティングされます。

最も印象的なデモンストレーション：**USB スティック上のエージェント**。エージェントの魂（プロンプト + カスタムプラグイン）は USB ドライブに存在します。OpenStarry が動作する任意のコンピュータに差し込むと、エージェントが目覚めます — ホストの Core ランタイムを使用しつつ、独自のアイデンティティと能力を保持します。別のコンピュータに差し込めば：同じ魂、異なる身体。

### 5. 痛覚駆動型の自己修正

**一般的なフレームワーク**: エラーは例外を発生させ、盲目的なリトライをトリガーし、実行を終了します。エージェントは自分が失敗したことを「知りません」 — フレームワークがエージェントの認識の上でエラーを処理します。

**OpenStarry**: エラーは**痛覚信号**になります — ツール結果としてエージェントのコンテキストに直接注入されます：

```
エラー発生 → SafetyMonitor がキャプチャ → Guide プラグインが重大度を解釈
→ 痛覚アラートをコンテキストに注入 → LLM が失敗を「感じる」→ 自己修正
```

3段階の重大度：💧 軽度の痛覚 → ⚡ 中度の痛覚 → 🔥🔥🔥 致命的な痛覚

**フラストレーションカウンター**が痛覚が無視された場合にレスポンスをエスカレート：
- 同一の失敗3回 → システムが「停止して原因を分析せよ」を注入
- 連続5回のエラー → 強制一時停止
- 10回の操作中80%のエラー率 → 緊急停止

これは生物の痛覚を模倣しています：軽微 → 不快 → 耐え難い → 意識喪失。

核心的な洞察：**Core は事実を提供し、Guide は意味を提供する。** Core は「/etc/passwd で EPERM」と言います。Guide は「これは致命的な痛覚を引き起こします。権限の壁に当たっています。停止して再考してください。」と言います。異なる Guide プラグインが同じエラーを異なる方法で解釈できます — セキュリティエージェントは慎重に反応し、学習エージェントは好奇心を持って反応します。

### 6. フラクタル・マルチエージェント合成

**一般的なフレームワーク**: マルチエージェントシステムには固定されたトポロジーがあります — スーパーバイザー・ワーカー、ラウンドロビン、ディベート。レイヤーを追加するにはアーキテクチャの変更が必要です。

**OpenStarry**: 自己相似構造。単一のエージェントとエージェントチームが**同一の MCP インターフェース**を公開します：

```
シンプルなエージェント：
  Input → LLM → Tool Calls → Output

複合エージェント（チーム）：
  Input → Coordinator Agent → [Sub-Agent A (research), Sub-Agent B (coding)] → Output

どちらも公開する：tools/list, tools/call via JSON-RPC 2.0
```

呼び出し側は、単一のエージェントと対話しているのか、50体のチームと対話しているのか区別できません。これにより、アーキテクチャの変更なしに無限層の合成が可能になります — チームのチームのチーム、それぞれがシンプルなピアとして見えます。

再帰ガード（TraceId + 深度カウンター、最大5層）が無限ループを防止します。

> *「エージェントは単純なツールであり得る…しかし複雑なチームでもあり得る…外部に対して、同じインターフェースを公開する。」*

### 7. 制御理論的基盤

**一般的なフレームワーク**: 実行モデルは命令型（ステップ1、ステップ2、ステップ3）またはチェーンベース（LangChain のチェーンメタファー）。安定性や収束の正式なモデルがありません。

**OpenStarry**: エージェントは明示的に**フィードバック制御システム**としてモデル化されています — オートパイロットや産業用ロボティクスで使用されるのと同じ数学です：

| 制御理論 | エージェントアーキテクチャ |
|---------|---------------------|
| 参照入力 | ユーザーの目標（System Prompt + メッセージ） |
| コントローラー | LLM（目標と状態の誤差を最小化） |
| 制御変数 | ツール呼び出し |
| プラント | 外部世界 |
| センサー | ツール結果 |
| 誤差信号 | 目標と現実のギャップ |

これにより三つの安定性問題に対する形式的な推論が可能になります：
- **振動**（元に戻す/やり直しループ） → コンテキスト履歴で解決（積分項）
- **発散**（目標のドリフト） → System Prompt のアンカリングで解決（決してプルーニングされない）
- **定常偏差**（早期完了） → 検証ステップで解決（微分項）

> **「知性とは、強力な LLM を持つことだけではない。フィードバックループの質こそが重要なのだ。」**

## 比較表

| 観点 | LangChain / CrewAI / AutoGen | OpenStarry |
|-----|------------------------------|------------|
| **エージェントモデル** | スクリプト / 関数呼び出し | OS プロセス / デジタル生命体 |
| **アーキテクチャの基盤** | 技術的カテゴリ | 仏教の五蘊（2,500年テスト済み） |
| **コアの純粋性** | デフォルト含む（ツール、メモリ、LLM） | ゼロのビルトイン能力（`test:purity` で検証） |
| **UI の結合** | 特定インターフェースに結合 | ヘッドレス — UI は交換可能なプラグイン |
| **エラーハンドリング** | 例外 / 盲目的リトライ | 重大度レベル + フラストレーションカウンター付き痛覚メカニズム |
| **マルチエージェント** | 固定トポロジー | MCP によるフラクタル合成（無限層） |
| **理論モデル** | 命令型 / チェーン | 制御理論的フィードバックループ（PID にインスパイア） |
| **ライフサイクル** | 実行 → 終了 | デーモン管理による永続化（スリープ/ウェイク/再起動） |
| **メモリ** | フレームワーク固有、ハードコード | プラガブルな戦略（スライディングウィンドウ / 要約 / 抽出） |
| **セキュリティ** | 各種 | 3レベルサーキットブレーカー + ファイルシステムサンドボックス + パスバリデーション |
| **移植性** | フレームワーク依存 | 移植可能な魂 — 同じエージェントが CLI、Web、USB、IoT で動作 |
| **安全閾値** | 設定可能なリトライ | 具体値：50ティック制限、100kトークン、30秒タイムアウト、3ストライクフィンガープリント |

## OpenStarry が「でないもの」

- **LangChain の置き換えではない** — 抽象化レベルが異なる。LangChain は LLM 呼び出しをチェーンする。OpenStarry は生きたデジタル生命体を創造する
- **チャットボットビルダーではない** — デーモン管理とライフサイクル永続化を持つエージェントオペレーティングシステム
- **まだプロダクション対応ではない** — v0.2.0-beta、活発に開発中、完了していることと計画中のことについて正直
- **すべてをやろうとはしていない** — Core は意図的に空。エコシステムがプラグインを通じてギャップを埋める
- **理論だけではない** — 118以上のテスト、動作する CLI、WebSocket、HTTP トランスポート、実際のコードを出荷

## 関心を持つべき人

- **AI エージェント研究者** — 哲学 + 制御理論に基づく新規アーキテクチャ、安定性についての形式的推論あり
- **フレームワーク開発者** — 設計研究としての極端なマイクロカーネルピュリティ。自動化されたアーキテクチャ強制
- **フルスタック開発者** — ヘッドレス設計により任意のフロントエンドを構築可能。ファクトリーパターンにより任意のプラグインを構築可能
- **マルチエージェント構築者** — トポロジー制約なしのスケーラブルなエージェントチームのためのフラクタル MCP 合成
- **哲学愛好家** — 表面的な命名ではない、真の東西融合
- **オープンソースコントリビューター** — 品質ゲート、凍結インターフェース、並行安全な開発を伴う完全な SOP

> *「私たちはチャットボットを構築しているのではない。デジタル種族のためのオペレーティングシステムを構築しているのだ。」*
