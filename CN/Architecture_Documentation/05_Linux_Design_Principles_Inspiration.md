# 04. 设计启发：借鉴 Linux/Unix 哲学

本代理人架构的设计深受 Linux/Unix 设计哲学的启发。这些经过数十年实践检验的原则为我们构建一个健壮、可扩展且安全的系统提供了宝贵的蓝图。

### 原则一：一切皆文件 (Everything is a File)
*   **Linux 中：** 将硬件、设备、网络连接等一切资源都抽象为统一的「文件」接口。
*   **架构借镜：** **一切皆插件 (Everything is a Plugin)**。
    *   我们将 `Provider`、`Tool`、`UI` 等所有功能都抽象为遵循标准化接口的「插件」。**通用插件基础设施** 扮演了 Linux 中虚拟文件系统 (VFS) 的角色，实现了对不同资源的统一管理。

### 原则二：小而美的工具，各司其职 (Small, Sharp Tools)
*   **Linux 中：** `grep`, `sed`, `awk` 等命令都只专注于做好一件事。
*   **架构借镜：** **专一的插件和节点 (Focused Plugins & Nodes)**。
    *   每个 `Tool` 插件和协调层中的每个 `节点` 都应只具备单一、明确的职责（如 `read_file` 只读文件，`OCR_Node` 只做识别）。这使得它们易于复用、测试和组合。

### 原则三：万物皆可管道 (Pipes and Redirection)
*   **Linux 中：** 管道符 `|` 将小工具串联起来，灵活地组合出强大的工作流。
*   **架构借镜：** **代理协调层 (Agent Coordination Layer)**。
    *   我们的「代理协调层」扮演的正是「管道」的角色。它负责定义数据流，将不同的「小工具」（即节点）连接起来，形成复杂的处理链和图，实现了 `输入 -> 处理A -> 处理B -> 输出` 的流程。

### 原则四：内核空间与用户空间 (Kernel Space vs. User Space)
*   **Linux 中：** 内核受保护，用户程序通过稳定的「系统调用 (System Calls)」接口请求内核服务，确保了系统的稳定和安全。
*   **架构借镜：** **无头核心与插件生态 (Headless Core vs. Plugins)**。
    *   「无头代理人核心」扮演**「内核」**的角色，提供底层、安全的服务。
    *   所有插件（Tools, UIs, Providers）都如同**「用户空间程序」**。
    *   插件必须通过核心定义的「系统调用」（即**双向通信接口**和工具执行请求）来与核心交互。
    *   核心的**安全层**是这个边界上最重要的守卫，确保了来自「用户空间」的危险操作会被「内核」拦截审核。

### 原则五：模块化设计 (Kernel Modules)
*   **Linux 中：** 可以在运行时动态加载和卸载内核模块（如驱动程序）。
*   **架构借镜：** **通用插件基础设施 (Universal Plugin Infrastructure)**。
    *   这完全对应了我们的插件系统。它允许在代理人运行时，动态地加载新的能力（Tool）、新的「大脑」（Provider）或新的「面孔」（UI），而无需修改或重启核心。

通过遵循这些来自计算机科学史上最成功项目之一的设计原则，我们的代理人架构能够天然地具备模块化、可扩展、安全和灵活的优良特性。