# 07. 命令 (Command) 的设计与定位

在我们的架构中，`Command` (命令) 是一个多层次的概念，根据其上下文的不同，它由系统的不同部分来处理。本文档旨在澄清 `Command` 与 `Tool` 的关系，以及它在架构中的具体定位。

---

## 1. 作为「用户系统命令」 (在 UI 插件中)

这是最直接面向用户的一种命令，用于控制代理人客户端或系统本身，而非交由 LLM 处理的任务。

*   **定义：** 以特殊前缀（如 `/`）开头的字符串，例如 `/help`, `/reset`, `/status`。
*   **处理者：** **UI 插件 (UI Plugin)**。
*   **工作流程：** `UI` 插件在接收到用户输入时，首先进行拦截判断。如果识别出是系统命令，则由 `UI` 插件自身进行解析和处理，不进入「代理人核心」对话流程。这种设计将用户对「系统」的操作和对「代理人」的对话任务清晰地分开。

---

## 2. 作为「工具」的同义词 (在工具插件中)

在许多语境下，`Command` 和 `Tool` 的概念可以互换。

*   **定义：** 一个可供 LLM 调用的、原子化的、具有单一职责的功能函数，例如 `read_file`。
*   **处理者：** **工具插件 (Tool Plugin)**，并由「代理人核心」的执行循环调度。
*   **结论：** 在我们的架构文档中，为了保持术语的统一，我们将此类功能统一称为 **`Tool`**。因此，如果 `Command` 是在这个意义上被使用，它就对应我们设计中的 `Tool`。

---

## 3. 作为「高阶工作流命令」 (在代理协调层中)

这是最高级、最强大的一种命令，代表一个可被调用的、由多个步骤组成的复杂任务。

*   **定义：** 一个具名的、可复用的**「工作流图 (Workflow Graph)」**。例如，一个名为 `generate_weekly_report` 的命令，其背后可能是一个包含数据查询、图表生成、LLM 总结和邮件发送等多个节点的工作流。
*   **处理者：** **代理协调层 (Agent Coordination Layer)**。
*   **工作流程：**
    1.  用户、定时任务或外部 API 触发一个高阶命令。
    2.  「代理协调层」的**路由组件**或**命令分派器**接收到请求，并识别出命令的名称。
    3.  协调层加载与该命令对应的预定义工作流图。
    4.  协调层的工作流引擎负责执行该图中的所有节点，完成整个复杂任务。

这种设计使得我们可以将复杂的业务逻辑封装成一个个简单的、可被调用的「命令」，极大地提升了系统的复用性和能力上限。